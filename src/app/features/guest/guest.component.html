<div class="container my-4">

  <!-- Guest Info Card -->
  <div class="card text-white mb-4 bg-gradient-pink-purple">
    <div class="card-body d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center">
      <div>
        <h3 class="card-title">Welcome, {{guestInfo.name}}!</h3>
        <p>Room {{guestInfo.room}} ‚Ä¢ {{guestInfo.roomType}}</p>
        <p>Check-in: {{guestInfo.checkIn}} ‚Ä¢ Check-out: {{guestInfo.checkOut}}</p>
        <p>{{guestInfo.guestsCount}} Guests</p>
      </div>
      <button class="btn btn-light text-pink-600 mt-3 mt-sm-0">Extend Stay</button>
    </div>
  </div>

  <!-- Tabs -->
  <ul class="nav nav-tabs mb-4">
    <li class="nav-item" *ngFor="let tab of tabs">
      <a class="nav-link" [class.active]="activeTab === tab.id" (click)="activeTab = tab.id">
        <i [class]="tab.icon + ' me-2'"></i>{{tab.label}}
      </a>
    </li>
  </ul>

  <!-- Tab Content -->
  <div *ngIf="activeTab === 'overview'" class="row g-4">

    <div class="col-lg-8">

      <!-- Quick Actions -->
      <div class="card mb-4">
        <div class="card-body">
          <h5>Quick Actions</h5>
          <div class="row g-3">
            <div class="col-6" *ngFor="let service of services">
              <button class="btn w-100 text-start p-3 border rounded-3 hover-shadow" (click)="openNewRequest(service.id)">
                <div class="icon-circle mb-2 bg-pink-100 text-pink-600">
                  <i [class]="service.icon"></i>
                </div>
                <strong>{{service.name}}</strong>
                <p class="mb-0 text-muted">{{service.description}}</p>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Recent Activity -->
      <div class="card mb-4">
        <div class="card-body">
          <h5>Recent Activity</h5>
          <div *ngFor="let request of requests | slice:0:3" class="d-flex align-items-center p-3 mb-2 bg-light rounded">
            <!-- <i [class]="request.icon + ' fs-4 bg-pink-100 p-2 rounded me-3 text-pink-600'"></i> -->
             <div class="icon-circle mb-2 bg-pink-100 text-pink-600 me-3">
                  <i [class]="request.icon"></i>
                </div>
            <div class="flex-grow-1">
              <strong>{{request.type}}</strong>
              <p class="mb-0 text-muted">{{request.description}}</p>
            </div>
            <span class="badge" [ngClass]="getStatusColor(request.status)">{{request.status}}</span>
          </div>
        </div>
      </div>

    </div>

    <!-- Bill Summary & Hotel Info -->
    <div class="col-lg-4">
      <div class="card mb-4">
        <div class="card-body">
          <h5>Current Bill</h5>
          <div class="d-flex justify-content-between"><span>Room Charges</span><span>$468.00</span></div>
          <div class="d-flex justify-content-between"><span>F&B</span><span>$87.50</span></div>
          <div class="d-flex justify-content-between"><span>Other Services</span><span>$22.00</span></div>
          <hr>
          <div class="d-flex justify-content-between"><strong>Total</strong><strong>${{totalBill.toFixed(2)}}</strong></div>
          <button class="btn btn-pink w-100 mt-3" (click)="activeTab='billing'">View Full Bill</button>
        </div>
      </div>

      <div class="card">
        <div class="card-body">
          <h5>Hotel Information</h5>
          <p>üìû Front Desk: Ext. 100</p>
          <p>üçΩÔ∏è Restaurant: 7 AM - 10 PM</p>
          <p>üèä Pool: 6 AM - 9 PM</p>
          <p>üí™ Gym: 24 Hours</p>
          <p>üßñ Spa: 9 AM - 8 PM</p>
        </div>
      </div>
    </div>

  </div>

  <!-- Services Tab -->
  <div *ngIf="activeTab === 'services'" class="row g-4">
    <div class="col-12 d-flex justify-content-between align-items-center mb-3">
      <h5>Available Services</h5>
      <button class="btn btn-pink" (click)="openNewRequest()">New Request <i class="bi-plus ms-1"></i></button>
    </div>
    <div class="col-12 row g-3">
      <div class="col-sm-6 col-lg-3 " *ngFor="let service of services">
        <button class="btn btn-outline-secondary w-100 p-4 text-center hover-shadow" (click)="openNewRequest(service.id)">
          <!-- <i [class]="service.icon + ' fs-2 mb-2 text-pink-600'"></i> -->
           <div class="icon-circle mb-2 bg-pink-100 text-pink-600">
                  <i [class]="service.icon"></i>
                </div>
          <h6>{{service.name}}</h6>
          <p class="text-muted mb-0">{{service.description}}</p>
        </button>
      </div>
    </div>
  </div>

  <!-- Requests Tab -->
  <div *ngIf="activeTab === 'requests'" class="row g-3">
    <div class="col-12 d-flex justify-content-between align-items-center mb-3">
      <h5>My Service Requests</h5>
      <button class="btn btn-pink" (click)="openNewRequest()">New Request <i class="bi-plus ms-1"></i></button>
    </div>
    <div class="col-12" *ngFor="let request of requests">
      <div class="card mb-2 p-3">
        <div class="d-flex justify-content-between align-items-start mb-2">
          <div class="d-flex align-items-center gap-3">
            <i [class]="request.icon + ' fs-4 bg-pink-100 p-2 rounded text-pink-600'"></i>
            <div>
              <strong>{{request.type}}</strong>
              <p class="mb-0 text-muted">{{request.description}}</p>
            </div>
          </div>
          <span class="badge" [ngClass]="getStatusColor(request.status)">{{request.status}}</span>
        </div>
        <p class="text-muted">Requested at: {{request.requestedAt}}</p>
      </div>
    </div>
  </div>

  <!-- Billing Tab -->
  <div *ngIf="activeTab === 'billing'" class="card">
    <div class="card-body border-bottom">
      <h5>Billing Statement</h5>
      <p>Room {{guestInfo.room}} ‚Ä¢ {{guestInfo.name}}</p>
    </div>
    <table class="table mb-0">
      <thead class="table-light">
        <tr>
          <th>Date</th>
          <th>Description</th>
          <th class="text-end">Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of billItems">
          <td>{{item.date}}</td>
          <td>{{item.description}}</td>
          <td class="text-end">${{item.amount.toFixed(2)}}</td>
        </tr>
        <tr class="table-light">
          <td colspan="2"><strong>Total</strong></td>
          <td class="text-end"><strong>${{totalBill.toFixed(2)}}</strong></td>
        </tr>
      </tbody>
    </table>
    <div class="card-body">
      <button class="btn btn-pink">Download Statement</button>
    </div>
  </div>

  <!-- New Request Modal -->
  <div class="modal fade show d-block" *ngIf="showNewRequest" (click)="closeModal()">
    <div class="modal-dialog modal-dialog-centered" (click)="$event.stopPropagation()">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">New Service Request</h5>
          <button type="button" class="btn-close" (click)="closeModal()"></button>
        </div>
        <div class="modal-body">
          <form #requestForm="ngForm" (ngSubmit)="submitNewRequest(requestDesc.value)">
            <div class="mb-3">
              <label class="form-label">Service Type</label>
              <select class="form-select" required [(ngModel)]="selectedService" name="service">
                <option value="">Select a service</option>
                <option *ngFor="let service of services" [value]="service.id">{{service.name}}</option>
              </select>
            </div>
            <div class="mb-3">
              <label class="form-label">Description</label>
              <textarea class="form-control" rows="3" #requestDesc placeholder="Describe your request..." required></textarea>
            </div>
            <div class="d-flex gap-2">
              <button class="btn btn-pink flex-grow-1" type="submit">Submit Request</button>
              <button class="btn btn-outline-secondary flex-grow-1" type="button" (click)="closeModal()">Cancel</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

</div>
