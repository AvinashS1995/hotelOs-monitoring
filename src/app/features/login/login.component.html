<div class="min-vh-100 d-flex align-items-center justify-content-center p-4"
  style="background: linear-gradient(135deg,#f0f8ff 0%, #f8f0ff 100%);">
  <div class="w-100" style="max-width:1100px;">
    <div class="row gx-4 align-items-center">
      <!-- Left Branding -->
      <div class="col-lg-6 d-none d-lg-block">
        <div class="rounded-3 p-5 text-white" style="background: linear-gradient(90deg,#2563eb,#7c3aed);">
          <div class="d-flex align-items-center mb-4">
            <div class="me-3"
              style="width:56px;height:56px;background: rgba(255,255,255,0.12);border-radius:12px;display:flex;align-items:center;justify-content:center;">
              <!-- Hotel icon placeholder -->
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5">
                <rect x="3" y="6" width="18" height="13" rx="1" />
                <path d="M7 6v-2" />
                <path d="M17 6v-2" />
              </svg>
            </div>
            <h3 class="mb-0">HotelOS</h3>
          </div>

          <h4>Welcome Back</h4>
          <p class="text-white-50 mb-4">Sign in to access your hotel management dashboard. Select your location and
            hotel property to get started.</p>

          <ul class="list-unstyled small">
            <li class="mb-2">üîπ <strong>Global Coverage</strong> ‚Äî Manage properties across multiple countries</li>
            <li class="mb-2">üîπ <strong>Multi-Property Support</strong> ‚Äî Access all your hotel locations from one
              platform</li>
            <li class="mb-2">üîπ <strong>Role-Based Access</strong> ‚Äî Secure dashboards tailored to your department</li>
          </ul>
        </div>
      </div>

      <!-- Right: Form -->
      <div class="col-lg-6">
        <div class="card shadow-sm border-0">
          <div class="card-body p-4 p-md-5">
            <h4 class="mb-2">Sign In</h4>
            <p class="text-muted mb-4">Select your location and role to continue</p>

            <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" novalidate>
              <!-- Location selection block -->
              <div class="p-3 mb-4 rounded-3" style="background:#f0f7ff;border:1px solid rgba(37,99,235,0.08);">
                <div class="d-flex align-items-center mb-3">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="1.5"
                    class="me-2">
                    <path d="M12 2C8 6 4 10 4 14a8 8 0 0 0 16 0c0-4-4-8-8-12z" />
                  </svg>
                  <h6 class="mb-0">Select Location</h6>
                </div>

                <div class="row g-2">
                  <div class="col-12 mb-2">
                    <label class="form-label small">Country</label>
                    <select class="form-select" formControlName="country">
                      <option value="">Select Country</option>
                      <option *ngFor="let c of countries" [value]="c.id">{{ c.flag }} {{ c.name }}</option>
                    </select>
                    <div *ngIf="loginForm.get('country')?.touched && loginForm.get('country')?.invalid"
                      class="form-text text-danger">Country required</div>
                  </div>

                  <div class="col-12 mb-2">
                    <label class="form-label small">State / Region</label>
                    <select class="form-select" formControlName="state" [disabled]="!availableStates.length">
                      <option value="">Select State / Region</option>
                      <option *ngFor="let s of availableStates" [value]="s.id">{{ s.name }}</option>
                    </select>
                    <div *ngIf="loginForm.get('state')?.touched && loginForm.get('state')?.invalid"
                      class="form-text text-danger">State required</div>
                  </div>

                  <div class="col-12 mb-2">
                    <label class="form-label small">City</label>
                    <select class="form-select" formControlName="city" [disabled]="!availableCities.length">
                      <option value="">Select City</option>
                      <option *ngFor="let city of availableCities" [value]="city.id">{{ city.name }}</option>
                    </select>
                    <div *ngIf="loginForm.get('city')?.touched && loginForm.get('city')?.invalid"
                      class="form-text text-danger">City required</div>
                  </div>

                  <div class="col-12">
                    <label class="form-label small">Hotel Property</label>

                    <div *ngIf="availableHotels.length; else noHotels" class="d-grid gap-2">
                      <button type="button" *ngFor="let h of availableHotels"
                        (click)="loginForm.patchValue({ hotel: h.id })"
                        [class.active]="loginForm.get('hotel')?.value === h.id" class="btn text-start border rounded-3">
                        <div class="fw-semibold">{{ h.name }}</div>
                        <div class="small text-muted">‚≠ê {{ h.rating }} &nbsp; | &nbsp; üõèÔ∏è {{ h.rooms }} rooms</div>
                      </button>
                    </div>

                    <ng-template #noHotels>
                      <div class="p-3 border rounded-3 text-center text-muted small">
                        {{ !loginForm.get('city')?.value ? 'Please select a city first' : 'No hotels available in this
                        city' }}
                      </div>
                    </ng-template>

                    <div *ngIf="loginForm.get('hotel')?.touched && loginForm.get('hotel')?.invalid"
                      class="form-text text-danger">Select hotel</div>
                  </div>
                </div>
              </div>

              <!-- QUICK ROLE SELECTION (React-style with CENTERED icons) -->
              <div class="mb-4">
                <label class="form-label small d-block mb-2 fw-semibold">Quick Role Selection</label>

                <div class="row g-3">
                  <div class="col-6 col-sm-4" *ngFor="let r of roles">
                    <button type="button" class="btn role-btn w-100 p-0 border-0 shadow-sm"
                      (click)="selectRole(r.email)" [ngStyle]="{
          'background-image':
            'linear-gradient(135deg, ' + r.colorStart + ', ' + r.colorEnd + ')'
        }">
                      <div class="role-btn-inner p-3 text-white text-center">

                        <!-- ICON CENTERED -->
                        <div class="icon-circle mx-auto mb-2">
                          <i class="{{ r.icon }}"></i>
                        </div>

                        <!-- Role Name -->
                        <div class="fw-bold role-name">{{ r.name }}</div>

                      </div>
                    </button>
                  </div>
                </div>
              </div>



              <!-- Credentials -->
              <div class="mb-3">
                <label class="form-label small">Email</label>
                <input class="form-control" type="email" formControlName="email" placeholder="Enter your email" />
                <div *ngIf="loginForm.get('email')?.touched && loginForm.get('email')?.invalid"
                  class="form-text text-danger">
                  A valid email is required
                </div>
              </div>

              <div class="mb-3 position-relative">
                <label class="form-label small">Password</label>
                <input [type]="showPassword ? 'text' : 'password'" class="form-control" formControlName="password"
                  placeholder="Enter your password" />
                <button type="button" (click)="togglePassword()"
                  class="btn btn-sm btn-link position-absolute end-0 top-0 mt-2 me-2">
                  {{ showPassword ? 'Hide' : 'Show' }}
                </button>
                <div *ngIf="loginForm.get('password')?.touched && loginForm.get('password')?.invalid"
                  class="form-text text-danger">Password required</div>
              </div>

              <div *ngIf="error" class="alert alert-danger small">{{ error }}</div>

              <div class="d-grid mb-3">
                <button class="btn btn-primary btn-lg" [disabled]="loginForm.invalid">Sign In</button>
              </div>
            </form>

            <div class="mt-3 p-3 bg-light rounded-3 small">
              <div>Password: <code>demo123</code></div>
              <div class="text-muted small">Try: USA ‚Üí New York ‚Üí New York City ‚Üí Grand Plaza Hotel</div>
            </div>

            <div class="mt-3 text-center">
              <a class="text-primary" routerLink="/">‚Üê Back to Home</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>